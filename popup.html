<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whats Messenger</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
            width: 500px;
            height: 700px;
            color: #333;
            background-color: #f7f7f7;
        }
        
        .header {
            background: #111827;
            color: white;
            padding: 20px;
            text-align: left;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .header-actions {
            display: flex;
            align-items: center;
        }
        
        .settings-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
            width: auto;
            margin: 0;
        }
        
        .settings-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .settings-description {
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #4f46e5;
        }
        
        .settings-description p {
            margin: 0;
            color: #64748b;
            font-size: 14px;
        }
        
        .settings-form {
            margin-bottom: 20px;
        }
        
        .setting-item {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            background: #fff;
        }
        
        .setting-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            margin-bottom: 0;
        }
        
        .setting-label input[type="checkbox"] {
            width: auto;
            margin-right: 12px;
            transform: scale(1.2);
        }
        
        .setting-text {
            flex: 1;
            font-size: 14px;
            color: #374151;
        }
        
        .help-icon {
            margin-left: 8px;
            font-size: 16px;
            cursor: help;
            opacity: 0.7;
        }
        
        .help-icon:hover {
            opacity: 1;
        }
        
        .settings-actions {
            margin-top: 20px;
        }
        
        .settings-actions button {
            margin-top: 8px;
        }
        
        .footer {
            background: #f8fafc;
            border-top: 1px solid #e2e8f0;
            padding: 8px 20px;
            text-align: center;
        }
        
        .version-info {
            font-size: 11px;
            color: #64748b;
            font-weight: 400;
        }
        
        .header .logo {
            width: 40px;
            height: 40px;
            margin-right: 15px;
            border-radius: 50%;
            background-color: #1E293B;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .header .logo img {
            width: 24px;
            height: 24px;
        }
        
        .header h1 {
            font-size: 20px;
            font-weight: 600;
        }
        
        .container {
            background: white;
            height: calc(100% - 110px);
            overflow-y: auto;
        }
        
        .tabs {
            display: flex;
            background: #f0f3f9;
            padding: 10px;
            border-bottom: 1px solid #e1e5eb;
            justify-content: space-around;
        }
        
        .tab {
            padding: 10px 16px;
            text-align: center;
            cursor: pointer;
            background: transparent;
            border: none;
            font-size: 13px;
            font-weight: 500;
            color: #64748b;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            border-radius: 6px;
            min-width: 80px;
        }
        
        .tab.active {
            background: white;
            color: #0f172a;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        }
        
        .tab:hover {
            background: rgba(255, 255, 255, 0.7);
        }
        
        .tab-content {
            display: none;
            padding: 20px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
            font-size: 14px;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
            background-color: #fff;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.1);
        }
        
        textarea {
            resize: vertical;
            min-height: 80px;
        }
        
        button {
            width: 100%;
            padding: 14px;
            background: #111827;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        button:hover {
            background: #1e293b;
        }
        
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .file-input-wrapper {
            position: relative;
            display: inline-block;
            width: 100%;
        }
        
        .file-input {
            border: 2px dashed #ddd;
            padding: 20px;
            text-align: center;
            border-radius: 8px;
            background: #fafafa;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .file-input:hover {
            border-color: #4f46e5;
            background: #f0f0f0;
        }
        
        .file-input input[type="file"] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }
        
        .file-info {
            margin-top: 10px;
            padding: 10px;
            border-radius: 8px;
            background: #f0f0f0;
            display: none;
        }
        
        .status {
            margin: 10px 0;
            padding: 10px;
            border-radius: 6px;
            font-size: 13px;
            display: none;
        }
        
        .status.info {
            background: #e8f4fd;
            color: #0077cc;
        }
        
        .status.success {
            background: #e6f7ef;
            color: #0d904f;
        }
        
        .status.error {
            background: #fce8e8;
            color: #cc0000;
        }
        
        .icon {
            margin-right: 4px;
        }

        /* Send to section styles */
        .send-to-section {
            margin-bottom: 15px;
        }

        .send-to-section h3 {
            margin-bottom: 10px;
            font-size: 16px;
            color: #333;
        }

        .send-option-group {
            display: flex;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 15px;
        }

                         .send-option {
            flex: 1;
            padding: 10px 12px;
            text-align: center;
            background: #f5f5f5;
            color: #6b7280;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            margin: 0;
            font-size: 14px;
        }

        .send-option.active {
            background: #111827;
            color: white;
        }

        .recipients-container {
            margin-top: 15px;
            display: none;
        }
        
        .recipients-method {
            margin-bottom: 15px;
        }
        
        .recipients-list {
            max-height: 150px;
            overflow-y: auto;
            margin-top: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 10px;
        }
        
        .recipient-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }
        
        .recipient-item:last-child {
            border-bottom: none;
        }
        
        .recipient-info {
            flex-grow: 1;
        }
        
        .remove-recipient {
            color: #dc3545;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            width: auto;
            padding: 0 5px;
            margin-top: 0;
        }
        
        /* URL preview */
        .url-preview {
            margin-top: 10px;
            padding: 10px;
            border-radius: 8px;
            background: #f0f0f0;
            display: none;
        }
        
        .url-preview img {
            max-width: 100%;
            max-height: 150px;
            border-radius: 4px;
        }
        
        .url-preview video {
            max-width: 100%;
            max-height: 150px;
            border-radius: 4px;
        }
        
        .small-text {
            font-size: 11px;
            color: #666;
            margin-top: 5px;
        }
        
        /* Template styles */
        .template-form {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .template-variables {
            background: #f8f9fa;
            padding: 8px;
            border-radius: 6px;
            margin-top: 5px;
            font-size: 12px;
        }
        
        .variable-tag {
            display: inline-block;
            background: #e9ecef;
            padding: 3px 8px;
            border-radius: 4px;
            margin-right: 5px;
            margin-bottom: 5px;
            cursor: pointer;
        }
        
        .saved-templates {
            margin-top: 20px;
        }
        
        .templates-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .templates-actions {
            display: flex;
            gap: 8px;
        }
        
        .template-item {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }
        
        .template-item .template-content {
            flex-grow: 1;
            margin-right: 10px;
        }
        
        .template-item .template-name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .template-item .template-text {
            font-size: 12px;
            color: #666;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 250px;
        }
        
        .template-actions {
            display: flex;
            gap: 5px;
        }
        
        .template-action-btn {
            width: 32px;
            height: 32px;
            padding: 0;
            margin: 0;
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            font-size: 16px;
            border-radius: 4px;
        }
        
        .template-action-btn:hover {
            background: #f0f0f0;
        }
        
        /* History styles */
        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .history-actions {
            display: flex;
            gap: 10px;
        }
        
        .small-button {
            width: auto;
            padding: 8px 12px;
            font-size: 12px;
            margin-top: 0;
        }
        
        .history-filters {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .history-filters select,
        .history-filters input {
            flex: 1;
            font-size: 12px;
            padding: 8px;
        }
        
        .history-list {
            margin-bottom: 15px;
        }
        
        .history-item {
            display: flex;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            margin-bottom: 8px;
            align-items: center;
        }
        
        .message-details {
            flex-grow: 1;
            margin: 0 10px;
        }
        
        .message-text {
            font-weight: 500;
        }
        
        .message-meta {
            font-size: 11px;
            color: #666;
            margin-top: 3px;
        }
        
        .message-media-info {
            font-size: 12px;
            color: #4f46e5;
            margin-top: 3px;
            margin-bottom: 3px;
        }
        
        .message-status {
            padding: 3px 6px;
            border-radius: 4px;
            font-size: 10px;
            margin-right: 5px;
        }
        
        .message-status.success {
            background: #e6f7ef;
            color: #0d904f;
        }
        
        .message-status.error {
            background: #fce8e8;
            color: #cc0000;
        }
        
        .message-status.info {
            background: #e8f4fd;
            color: #0077cc;
        }
        
        .message-type {
            font-size: 10px;
            padding: 3px 6px;
            border-radius: 4px;
            background: #eee;
            margin-left: 5px;
        }
        
        .message-type.campaign-type {
            background: #e8f4fd;
            color: #0077cc;
        }
        
        .action-button {
            width: 24px;
            height: 24px;
            padding: 0;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            color: #666;
            margin: 0 2px;
        }
        
        .empty-history {
            padding: 20px;
            text-align: center;
            color: #666;
        }
        
        .pagination {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .pagination button {
            width: auto;
            padding: 6px 12px;
            font-size: 12px;
            margin-top: 0;
        }
        
        /* Delay indicator */
        .delay-indicator {
            background: #fffbea;
            color: #b07d0f;
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 15px;
            text-align: center;
            font-size: 13px;
            display: none;
        }
        
        .delay-timer {
            font-weight: bold;
            margin-top: 5px;
            font-size: 12px;
            color: #b07d0f;
        }
        
        /* Progress bar */
        .progress-container {
            display: none;
            margin-top: 10px;
            margin-bottom: 15px;
        }
        
        .progress-bar {
            height: 8px;
            background: #f0f0f0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: #4f46e5;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            margin-top: 5px;
        }

                 /* CSV Preview Styles */
         .csv-preview {
             margin-top: 10px;
             padding: 10px;
             border: 1px solid #ddd;
             border-radius: 8px;
             background: #f9f9f9;
             overflow: hidden;
         }

         .csv-preview-header {
             display: flex;
             justify-content: space-between;
             align-items: center;
             margin-bottom: 10px;
             padding-bottom: 5px;
             border-bottom: 1px solid #eee;
         }

         .csv-preview-header h4 {
             margin: 0;
             font-size: 14px;
             color: #333;
         }

         .csv-total {
             font-weight: bold;
             color: #4f46e5;
         }

         .csv-preview-table-container {
             width: 100%;
             max-height: 200px;
             overflow: auto;
             border: 1px solid #eee;
             border-radius: 4px;
         }

         .csv-preview-table {
             border-collapse: collapse;
             width: 100%;
             min-width: 600px; /* Ensure table is horizontally scrollable */
         }

         .csv-preview-table th,
         .csv-preview-table td {
             border: 1px solid #ddd;
             padding: 8px;
             text-align: left;
             font-size: 13px;
             color: #333;
         }

         .csv-preview-table th {
             background-color: #f0f0f0;
             font-weight: bold;
             color: #333;
             position: sticky;
             top: 0;
             z-index: 10;
             box-shadow: 0 1px 1px rgba(0,0,0,0.1);
         }

         .csv-preview-table tr:nth-child(even) {
             background-color: #f5f5f5;
         }

         .csv-preview-table tr:hover {
             background-color: #e0e0e0;
         }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">
            <svg viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                <path d="M12,2 C17.5228,2 22,6.47715 22,12 C22,17.5228 17.5228,22 12,22 C10.2363733,22 8.57708836,21.5426667 7.13692151,20.7397113 L6.83171,20.5624 L3.79975,21.4542 C3.06935952,21.6690571 2.38822075,21.0329392 2.51987109,20.3093059 L2.54581,20.2002 L3.43756,17.1683 C2.52505,15.6594 2,13.8896 2,12 C2,6.47715 6.47715,2 12,2 Z M12,4 C7.58172,4 4,7.58172 4,12 C4,13.5769 4.4552,15.0444 5.24098,16.2818 C5.43935125,16.5942625 5.52373625,16.9780813 5.45651889,17.3588949 L5.41832,17.5217 L4.97667,19.0233 L6.47827,18.5817 C6.91075,18.4545 7.36114,18.5323 7.71817,18.759 C8.95564,19.5448 10.4231,20 12,20 C16.4183,20 20,16.4183 20,12 C20,7.58172 16.4183,4 12,4 Z M9.10162,7.18408 C9.31746,7.09158 9.57889,7.1085 9.78556,7.25926 C10.2899867,7.62722 10.6904844,8.12075778 11.0344133,8.6034437 L11.36124,9.0774594 C11.4131531,9.15417481 11.4639333,9.22932556 11.5138,9.30228 C11.69632,9.569211 11.675287,9.9238974 11.4684886,10.165959 L11.3927,10.2422 L10.4693,10.928 C10.3778,10.996 10.3473,11.1195 10.4022,11.2195 C10.6112,11.5998 10.9834,12.1657 11.4093,12.5916 C11.8357,13.018 12.4284,13.4143 12.8348,13.6467 C12.9226333,13.69695 13.0293556,13.6810889 13.1010315,13.6156676 L13.1394,13.5706 L13.7402,12.6555 C13.9705,12.349 14.4007,12.282 14.7134,12.4984 L15.2562641,12.876825 C15.7957063,13.2618187 16.315025,13.675725 16.7255,14.2014 C16.8872,14.4085 16.9112,14.6792 16.8148,14.9042 C16.4188,15.8283 15.4165,16.6153 14.374,16.5769 L14.2154519,16.5677643 L14.0235335,16.5487562 C13.9888929,16.5445999 13.9529568,16.5399081 13.9157727,16.5346187 L13.6780718,16.4952138 C12.7543753,16.3207908 11.2726031,15.7970103 9.73827,14.2627 C8.20396724,12.7283897 7.68016555,11.2465654 7.50573193,10.3228642 L7.46632442,10.0851634 L7.44126064,9.87741745 L7.42756026,9.70190572 C7.42605824,9.67546659 7.42490552,9.65046552 7.42404,9.62695 C7.38562,8.58294 8.17688,7.5804 9.10162,7.18408 Z" fill="white"></path>
            </svg>
        </div>
        <h1>Whats Messenger</h1>
        <!-- <small style="color: rgba(255,255,255,0.7); font-size: 11px; margin-top: -5px; display: block;">v<span id="headerVersion"></span></small> -->
                         <div class="header-actions">
                     <button id="settingsBtn" class="settings-btn" title="Settings">
                         <span class="icon" id="settingsIcon">⚙️</span>
                     </button>
                 </div>
    </div>
    
    <div class="container">
        <div class="tabs">
            <button class="tab active" data-tab="text">
                <span class="icon">💬</span>Text
            </button>
            <button class="tab" data-tab="url">
                <span class="icon">🔗</span>URL
            </button>
            <button class="tab" data-tab="file">
                <span class="icon">📎</span>File
            </button>
            <button class="tab" data-tab="templates">
                <span class="icon">📋</span>Templates
            </button>
            <button class="tab" data-tab="history">
                <span class="icon">📜</span>History
            </button>
            <button class="tab" data-tab="settings" style="display: none;">
                <span class="icon">⚙️</span>Settings
            </button>
        </div>
        
        <!-- Text Message Tab -->
        <div id="text-tab" class="tab-content active">
            <h2>
                <span class="icon">💬</span>
                Send Text Message
            </h2>
            
            <div class="send-to-section">
                <div class="send-option-group">
                    <button class="send-option active" data-option="single" data-tab="text">
                        <span class="icon">👤</span>Single
                    </button>
                    <button class="send-option" data-option="multiple" data-tab="text">
                        <span class="icon">👥</span>Multiple
                    </button>
                </div>
                
                <!-- Single recipient -->
                <div id="textSingleRecipient">
                    <div class="form-group">
                        <label for="textMobile">Recipient</label>
                                                 <input type="tel" id="textMobile" placeholder="e.g., 918879331633 (with country code)" />
                    </div>
                </div>
                
                <!-- Multiple recipients -->
                <div id="textMultipleRecipients" class="recipients-container">
                    <div class="recipients-method">
                        <label for="textRecipientsMethod">Recipients Method:</label>
                        <select id="textRecipientsMethod">
                            <option value="manual">Manual Entry</option>
                            <option value="csv">File Upload</option>
                        </select>
                    </div>
                    
                    <div id="textManualEntry">
                        <div class="form-group">
                            <label>Recipients (comma separated)</label>
                                                         <input type="text" id="textRecipientsList" placeholder="918879331633, 917012345678, 919876543210" />
                        </div>
                    </div>
                    
                    <div id="textCsvUpload" style="display: none;">
                        <div class="file-input-wrapper">
                            <div class="file-input">
                                <input type="file" id="textCsvFile" accept=".csv,.xlsx,.xls" />
                                <span>Upload CSV or Excel file with contacts</span>
                            </div>
                        </div>
                        <div class="small-text">File should have columns: number, name (optional) - headers are case insensitive</div>
                        <div id="textCsvPreview" class="csv-preview" style="display: none;">
                            <div class="csv-preview-header">
                                <h4>File Preview <span id="textCsvTotal" class="csv-total"></span></h4>
                            </div>
                            <div class="csv-preview-table-container">
                                <table id="textCsvTable" class="csv-preview-table"></table>
                            </div>
                        </div>
                    </div>
                    
                    <div id="textRecipientsSummary" class="recipients-list" style="display: none;">
                        <div class="small-text" id="textRecipientsCount">0 recipients added</div>
                        <div id="textRecipientsContainer"></div>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label for="textMessage">Message</label>
                <textarea id="textMessage" placeholder="Type your message here..." rows="4"></textarea>
                                 <div id="textTemplateOptions" style="margin-top: 5px;">
                     <select id="textTemplateSelect" style="padding: 6px 10px; font-size: 12px; background: #f0f0f0; color: #333; border: 1px solid #ddd; border-radius: 4px; cursor: pointer; width: 100%;">
                         <option value="">📋 Select Template</option>
                     </select>
                 </div>
            </div>

            <div id="textStatus" class="status"></div>
            
            <button id="textBtn">
                <span class="icon">🚀</span>Send Message
            </button>
        </div>
        
        <!-- URL Media Tab -->
        <div id="url-tab" class="tab-content">
            <h2>
                <span class="icon">🔗</span>
                Send URL/Media
            </h2>
            
            <div class="send-to-section">
                <div class="send-option-group">
                    <button class="send-option active" data-option="single" data-tab="url">
                        <span class="icon">👤</span>Single
                    </button>
                    <button class="send-option" data-option="multiple" data-tab="url">
                        <span class="icon">👥</span>Multiple
                    </button>
                </div>
                
                <!-- Single recipient -->
                <div id="urlSingleRecipient">
                    <div class="form-group">
                        <label for="urlMobile">Recipient</label>
                                                 <input type="tel" id="urlMobile" placeholder="e.g., 918879331633 (with country code)" />
                    </div>
                </div>
                
                <!-- Multiple recipients -->
                <div id="urlMultipleRecipients" class="recipients-container">
                    <div class="recipients-method">
                        <label for="urlRecipientsMethod">Recipients Method:</label>
                        <select id="urlRecipientsMethod">
                            <option value="manual">Manual Entry</option>
                            <option value="csv">File Upload</option>
                        </select>
                    </div>
                    
                    <div id="urlManualEntry">
                        <div class="form-group">
                            <label>Recipients (comma separated)</label>
                                                         <input type="text" id="urlRecipientsList" placeholder="918879331633, 917012345678, 919876543210" />
                        </div>
                    </div>
                    
                    <div id="urlCsvUpload" style="display: none;">
                        <div class="file-input-wrapper">
                            <div class="file-input">
                                <input type="file" id="urlCsvFile" accept=".csv,.xlsx,.xls" />
                                <span>Upload CSV or Excel file with contacts</span>
                            </div>
                        </div>
                        <div class="small-text">File should have columns: number, name (optional) - headers are case insensitive</div>
                        <div id="urlCsvPreview" class="csv-preview" style="display: none;">
                            <div class="csv-preview-header">
                                <h4>File Preview <span id="urlCsvTotal" class="csv-total"></span></h4>
                            </div>
                            <div class="csv-preview-table-container">
                                <table id="urlCsvTable" class="csv-preview-table"></table>
                            </div>
                        </div>
                    </div>
                    
                    <div id="urlRecipientsSummary" class="recipients-list" style="display: none;">
                        <div class="small-text" id="urlRecipientsCount">0 recipients added</div>
                        <div id="urlRecipientsContainer"></div>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label for="mediaUrl">URL or Media Link</label>
                <input type="url" id="mediaUrl" placeholder="https://example.com or media URL" />
            </div>
            
            <div id="urlPreview" class="url-preview"></div>
            
            <div class="form-group">
                <label for="urlMessage">Optional Message</label>
                <textarea id="urlMessage" placeholder="Add a message with your link..." rows="3"></textarea>
                                 <div id="urlTemplateOptions" style="margin-top: 5px;">
                     <select id="urlTemplateSelect" style="padding: 6px 10px; font-size: 12px; background: #f0f0f0; color: #333; border: 1px solid #ddd; border-radius: 4px; cursor: pointer; width: 100%;">
                         <option value="">📋 Select Template</option>
                     </select>
                 </div>
            </div>

            <div id="urlStatus" class="status"></div>
            
            <button id="urlBtn">
                <span class="icon">🚀</span>Send URL
            </button>
        </div>
        
        <!-- File Upload Tab -->
        <div id="file-tab" class="tab-content">
            <h2>
                <span class="icon">📎</span>
                Upload & Send File
            </h2>
            
            <div class="send-to-section">
                <div class="send-option-group">
                    <button class="send-option active" data-option="single" data-tab="file">
                        <span class="icon">👤</span>Single
                    </button>
                    <button class="send-option" data-option="multiple" data-tab="file">
                        <span class="icon">👥</span>Multiple
                    </button>
                </div>
                
                <!-- Single recipient -->
                <div id="fileSingleRecipient">
                    <div class="form-group">
                        <label for="fileMobile">Recipient</label>
                                                 <input type="tel" id="fileMobile" placeholder="e.g., 918879331633 (with country code)" />
                    </div>
                </div>
                
                <!-- Multiple recipients -->
                <div id="fileMultipleRecipients" class="recipients-container">
                    <div class="recipients-method">
                        <label for="fileRecipientsMethod">Recipients Method:</label>
                        <select id="fileRecipientsMethod">
                            <option value="manual">Manual Entry</option>
                            <option value="csv">File Upload</option>
                        </select>
                    </div>
                    
                    <div id="fileManualEntry">
                        <div class="form-group">
                            <label>Recipients (comma separated)</label>
                                                         <input type="text" id="fileRecipientsList" placeholder="918879331633, 917012345678, 919876543210" />
                        </div>
                    </div>
                    
                    <div id="fileCsvUpload" style="display: none;">
                        <div class="file-input-wrapper">
                            <div class="file-input">
                                <input type="file" id="fileCsvFile" accept=".csv,.xlsx,.xls" />
                                <span>Upload CSV or Excel file with contacts</span>
                            </div>
                        </div>
                        <div class="small-text">File should have columns: number, name (optional) - headers are case insensitive</div>
                        <div id="fileCsvPreview" class="csv-preview" style="display: none;">
                            <div class="csv-preview-header">
                                <h4>File Preview <span id="fileCsvTotal" class="csv-total"></span></h4>
                            </div>
                            <div class="csv-preview-table-container">
                                <table id="fileCsvTable" class="csv-preview-table"></table>
                            </div>
                        </div>
                    </div>
                    
                    <div id="fileRecipientsSummary" class="recipients-list" style="display: none;">
                        <div class="small-text" id="fileRecipientsCount">0 recipients added</div>
                        <div id="fileRecipientsContainer"></div>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label>Select File</label>
                <div class="file-input-wrapper">
                    <div class="file-input">
                        <input type="file" id="fileInput" accept="image/*,video/*,audio/*,.pdf,.doc,.docx" />
                        <span>Click to select or drag and drop</span>
                    </div>
                </div>
                <div class="small-text">Supports: Images, Videos, Audio, PDF, Documents</div>
            </div>
            
            <div id="fileInfo" class="file-info"></div>
            
            <div class="form-group">
                <label for="fileMessage">Optional Message</label>
                <textarea id="fileMessage" placeholder="Add a message with your file..." rows="3"></textarea>
                                 <div id="fileTemplateOptions" style="margin-top: 5px;">
                     <select id="fileTemplateSelect" style="padding: 6px 10px; font-size: 12px; background: #f0f0f0; color: #333; border: 1px solid #ddd; border-radius: 4px; cursor: pointer; width: 100%;">
                         <option value="">📋 Select Template</option>
                     </select>
                 </div>
            </div>

            <div id="fileStatus" class="status"></div>
            
            <button id="fileBtn" disabled>
                <span class="icon">🚀</span>Send File
            </button>
        </div>
        
        <!-- Templates Tab -->
        <div id="templates-tab" class="tab-content">
            <h2>
                <span class="icon">📋</span>
                Message Templates
            </h2>
            
            <div class="template-form">
                <div class="form-group">
                    <label for="templateName">Template Name</label>
                    <input type="text" id="templateName" placeholder="Enter template name" />
                </div>
                
                <div class="form-group">
                    <label for="templateContent">Template Content</label>
                                         <textarea id="templateContent" placeholder="Use {{name}} and {{number}} for variables" rows="4"></textarea>
                                         <div class="template-variables">
                         <div>Available variables:</div>
                         <span class="variable-tag" data-variable="{{name}}">{{name}}</span>
                         <span class="variable-tag" data-variable="{{number}}">{{number}}</span>
                         <span class="variable-tag" data-variable="{{time}}">{{time}}</span>
                     </div>
                     <div class="small-text">Use variables: {{name}}, {{number}}, {{time}}, etc.</div>
                </div>
                
                <div id="templatesStatus" class="status"></div>
                
                <button id="saveTemplateBtn">
                    <span class="icon">💾</span>Save Template
                </button>
            </div>
            
            <div class="saved-templates">
                <div class="templates-header">
                    <h3>Saved Templates</h3>
                    <div class="templates-actions">
                        <button id="exportTemplatesBtn" class="small-button">
                            <span class="icon">📤</span>Export
                        </button>
                        <button id="importTemplatesBtn" class="small-button">
                            <span class="icon">📥</span>Import
                        </button>
                        <input type="file" id="templatesFileInput" accept=".json" style="display: none;" />
                    </div>
                </div>
                <div id="savedTemplatesList"></div>
            </div>
        </div>
        
        <!-- History Tab -->
        <div id="history-tab" class="tab-content">
            <div class="history-header">
                <h3>Message History</h3>
                <div class="history-actions">
                    <button id="exportHistoryBtn" class="small-button">
                        <span class="icon">📤</span>Export
                    </button>
                    <button id="importHistoryBtn" class="small-button">
                        <span class="icon">📥</span>Import
                    </button>
                    <button id="clearHistoryBtn" class="small-button">
                        <span class="icon">🗑️</span>Clear
                    </button>
                    <input type="file" id="historyFileInput" accept=".json" style="display: none;" />
                </div>
            </div>
            
            <div class="history-filters">
                <select id="historyTypeFilter">
                    <option value="all">All Types</option>
                    <option value="single">Single Messages</option>
                    <option value="bulk">Bulk Campaigns</option>
                </select>
                <select id="historyStatusFilter">
                    <option value="all">All Status</option>
                    <option value="success">Success</option>
                    <option value="failed">Failed</option>
                </select>
                <input type="text" id="historySearch" placeholder="Search..." />
            </div>
            
            <div id="historyList" class="history-list">
                <div class="empty-history">No message history found</div>
            </div>
            
            <div id="historyPagination" class="pagination">
                <button id="prevPageBtn" disabled>&lt; Previous</button>
                <span id="paginationInfo">Page 1 of 1</span>
                <button id="nextPageBtn" disabled>Next &gt;</button>
            </div>
        </div>
        
        <!-- Settings Tab -->
        <div id="settings-tab" class="tab-content">
            <h2>
                <span class="icon">⚙️</span>
                Advanced Settings
            </h2>
            
            <div class="settings-description">
                <p>These features help lower the chances of getting banned by WhatsApp.</p>
            </div>
            
            <div class="settings-form">
                <div class="setting-item">
                    <label class="setting-label">
                        <input type="checkbox" id="randomDelayEnabled" checked />
                        <span class="checkmark"></span>
                                                                          <span class="setting-text">Add random time-gap of 5 to 
                             <input type="number" id="maxDelaySeconds" value="30" min="5" max="600" style="width: 60px; display: inline-block; margin: 0 5px;" />
                             secs in b/w msgs
                         </span>
                    </label>
                    <div class="small-text" style="margin-top: 5px; margin-left: 25px; color: #666;">
                        If disabled, a fixed 5 second delay will be used between messages
                    </div>
                </div>
                
                <div class="setting-item">
                    <label class="setting-label">
                        <input type="checkbox" id="pauseAfterBatch" checked/>
                        <span class="checkmark"></span>
                                                 <span class="setting-text">Wait for 
                             <input type="number" id="pauseMinutes" value="5" min="1" max="60" style="width: 60px; display: inline-block; margin: 0 5px;" />
                             mins after sending 
                             <input type="number" id="batchSize" value="40" min="10" max="100" style="width: 60px; display: inline-block; margin: 0 5px;" />
                             messages.
                         </span>
                    </label>
                </div>
                
                <div class="setting-item">
                    <label class="setting-label">
                        <input type="checkbox" id="preventSleep" />
                        <span class="checkmark"></span>
                                                 <span class="setting-text">Prevent sleeping while sending messages</span>
                    </label>
                </div>
            </div>
            
            <div id="settingsStatus" class="status"></div>
            
                         <div class="settings-actions">
                 <button id="saveSettingsBtn">
                     <span class="icon">💾</span>Save Settings
                 </button>
                 <button id="resetSettingsBtn" style="background: #dc2626; margin-top: 10px;">
                     <span class="icon">🔄</span>Reset to Default
                 </button>
             </div>
        </div>
        
        <!-- Template Selection Modal (to be shown when selecting a template) -->
        <div id="templateModal" style="display: none;">
            <!-- Modal content will be added dynamically -->
        </div>
        
        <!-- Progress indicators for bulk messaging -->
        <div id="bulkProgress" class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text">
                <span id="progressCount">0/0 sent</span>
                <span id="progressPercent">0%</span>
            </div>
        </div>
        
        <div id="delayIndicator" class="delay-indicator">
            <span class="icon">⏳</span><span id="delayMessage">Waiting before next message...</span>
            <div class="delay-timer" id="delayTimer">0s remaining</div>
        </div>
    </div>
    
    <footer class="footer">
        <div class="version-info">
            Whats Messenger v<span id="extensionVersion"></span>
        </div>
    </footer>
    
    <script src="src/jquery-3.7.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="src/popup.js"></script>
</body>
</html>